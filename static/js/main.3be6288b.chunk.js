(this["webpackJsonpsupply-chain-hub"]=this["webpackJsonpsupply-chain-hub"]||[]).push([[0],{101:function(e,t,n){e.exports=n(114)},106:function(e,t,n){},107:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(9),l=n.n(i),o=(n(106),n(89)),c=n(187),s=(n(107),n(163)),u=n(166),d=n(168),m=n(38),g=n(169),p=n(117),f=n(85),y=n.n(f),h=Object(s.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function b(){var e=h();return r.a.createElement("div",{className:e.root},r.a.createElement(u.a,{position:"static"},r.a.createElement(d.a,null,r.a.createElement(p.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(y.a,null)),r.a.createElement(m.a,{variant:"h6",className:e.title},"Supply Chain Hub"),r.a.createElement(g.a,{color:"inherit"},"Login"))))}var v=n(11),E=n(14),_=n(186),I=n(191),S=n(197),x=n(66),A=n(76),P=n(72),w=n(181),k=n(177),q=n(196),D=n(118),O=n(183),C=n(184),N=n(185),R=n(190),j=n(116),B=n(192),H=n(180),F=n(173),M=n(174),U=n(172),L=n(171),T=n(182),W=n(188),Q=n(194),z=n(67),Y=n.n(z),G=n(88),V=n.n(G),J=n(32),X=n(193),$=n(179),K=n(178),Z=n(170),ee=n(86),te=n.n(ee),ne=n(87),ae=n.n(ne),re=r.a.forwardRef((function(e,t){return r.a.createElement(Z.a,Object.assign({direction:"up",ref:t},e))})),ie=Object(s.a)((function(e){return{paper:{height:50,minWidth:120,justifyContent:"center",alignItems:"center",display:"inline-flex",paddingLeft:e.spacing(4),paddingRight:e.spacing(4),paddingTop:e.spacing(2),paddingBottom:e.spacing(2),backgroundColor:"white",border:"2px solid ".concat(e.palette.primary.main),color:e.palette.primary.main,boxShadow:"0 5px 20px rgba(0,0,0,.16)",zIndex:0},arrowContainer:{display:"inline-flex",justifyContent:"center",alignItems:"center",width:75},arrow:{backgroundColor:e.palette.primary.main,height:2,width:"100%",zIndex:-1},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,fontWeight:500}}}));var le=function(e){var t=ie(),n=Object(a.useState)(!1),i=Object(E.a)(n,2),l=i[0],o=i[1],c=r.a.useState(!1),s=Object(E.a)(c,2),f=s[0],y=s[1],h=Object(a.useState)(0),b=Object(E.a)(h,2),v=b[0],_=b[1],I=Object(a.useState)(""),S=Object(E.a)(I,2),x=S[0],A=S[1],P=Object(a.useState)(""),w=Object(E.a)(P,2),k=w[0],q=w[1];Object(a.useEffect)((function(){var t,n,a,r,i;if(0===(null===e||void 0===e||null===(t=e.roles)||void 0===t?void 0:t.indexOf(e.name)))_(0),A(null===(r=e.roles)||void 0===r?void 0:r[(null===e||void 0===e||null===(i=e.roles)||void 0===i?void 0:i.indexOf(e.name))+1]),q(0);else if((null===e||void 0===e||null===(n=e.roles)||void 0===n?void 0:n.indexOf(e.name))===(null===e||void 0===e||null===(a=e.roles)||void 0===a?void 0:a.length)-1){var l,o;_(2),A(0),q(null===(l=e.roles)||void 0===l?void 0:l[(null===e||void 0===e||null===(o=e.roles)||void 0===o?void 0:o.indexOf(e.name))-1])}else{var c,s,u,d;_(1),A(null===(c=e.roles)||void 0===c?void 0:c[(null===e||void 0===e||null===(s=e.roles)||void 0===s?void 0:s.indexOf(e.name))+1]),q(null===(u=e.roles)||void 0===u?void 0:u[(null===e||void 0===e||null===(d=e.roles)||void 0===d?void 0:d.indexOf(e.name))-1])}}),[e]);var D=Object(a.useState)([]),O=Object(E.a)(D,2),C=O[0],N=O[1];Object(a.useEffect)((function(){N(function(e,t,n,a){var r=[{name:"makeLot()",desc:"Nulla facilisi. Phasellus sollicitudin nulla et quam mattis feugiat. Aliquam eget maximus est, id dignissim quam."},{name:"packedLot()",desc:"Nulla facilisi. Phasellus sollicitudin nulla et quam mattis feugiat. Aliquam eget maximus est, id dignissim quam."},{name:"forSaleLotBy".concat(e,"()"),desc:"Nulla facilisi. Phasellus sollicitudin nulla et quam mattis feugiat. Aliquam eget maximus est, id dignissim quam."},{name:"sellLotTo".concat(t,"()"),desc:"Nulla facilisi. Phasellus sollicitudin nulla et quam mattis feugiat. Aliquam eget maximus est, id dignissim quam."},{name:"shipLotFrom".concat(e,"To").concat(t,"()"),desc:"Nulla facilisi. Phasellus sollicitudin nulla et quam mattis feugiat. Aliquam eget maximus est, id dignissim quam."},{name:"add".concat(t,"()"),desc:"Nulla facilisi. Phasellus sollicitudin nulla et quam mattis feugiat. Aliquam eget maximus est, id dignissim quam."}],i=[{name:"payFrom".concat(e,"To").concat(n,"()"),desc:"Nulla facilisi. Phasellus sollicitudin nulla et quam mattis feugiat. Aliquam eget maximus est, id dignissim quam."},{name:"receivedBy".concat(e,"()"),desc:"Nulla facilisi. Phasellus sollicitudin nulla et quam mattis feugiat. Aliquam eget maximus est, id dignissim quam."},{name:"forSaleLotBy".concat(e,"()"),desc:"Nulla facilisi. Phasellus sollicitudin nulla et quam mattis feugiat. Aliquam eget maximus est, id dignissim quam."},{name:"sellLotTo".concat(t,"()"),desc:"Nulla facilisi. Phasellus sollicitudin nulla et quam mattis feugiat. Aliquam eget maximus est, id dignissim quam."},{name:"shipLotFrom".concat(e,"To").concat(t,"()"),desc:"Nulla facilisi. Phasellus sollicitudin nulla et quam mattis feugiat. Aliquam eget maximus est, id dignissim quam."},{name:"add".concat(t,"()"),desc:"Nulla facilisi. Phasellus sollicitudin nulla et quam mattis feugiat. Aliquam eget maximus est, id dignissim quam."}],l=[{name:"payFrom".concat(e,"To").concat(n,"()"),desc:"Nulla facilisi. Phasellus sollicitudin nulla et quam mattis feugiat. Aliquam eget maximus est, id dignissim quam."},{name:"receivedBy".concat(e,"()"),desc:"Nulla facilisi. Phasellus sollicitudin nulla et quam mattis feugiat. Aliquam eget maximus est, id dignissim quam."}];switch(a){case 0:return r;case 1:return i;case 2:return l;default:return i}}(e.name,x,k,v))}),[e,x,k,v]);var R=function(){o(!1)};return e.blank?r.a.createElement("div",{onClick:e.handleClickOpen,style:{textAlign:"center",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(L.a,{color:"primary","aria-label":"add",variant:"extended",style:{boxShadow:"none"}},r.a.createElement(Y.a,null),"Add Role \xa0")):r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a.div,{initial:{x:-200,opacity:0},animate:{x:0,opacity:1},whileHover:{scale:1.05},transition:{type:"tween",delay:.2},style:{display:"inline-flex",flexDirection:"row",cursor:"pointer"},onClick:function(){o(!0)}},r.a.createElement("div",{className:t.paper},e.name),e.lastElement?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:t.arrowContainer},r.a.createElement("div",{className:t.arrow}))),r.a.createElement(B.a,{open:l,onClose:R,"aria-labelledby":"form-dialog-title",TransitionComponent:re,keepMounted:!0},r.a.createElement(u.a,{className:t.appBar},r.a.createElement(d.a,null,r.a.createElement(p.a,{edge:"start",color:"inherit",onClick:R,"aria-label":"close"},r.a.createElement(te.a,null)),r.a.createElement(m.a,{variant:"h6",className:t.title},e.name),r.a.createElement(g.a,{onClick:function(){e.removeRole(e.name),o(!1)},color:"secondary",variant:"contained"},"Delete Role"))),r.a.createElement(U.a,{id:"form-dialog-title"},"Edit ",e.name),r.a.createElement(F.a,null,r.a.createElement(M.a,null,"Slightest Change in each role will affect the whole supply chain."),r.a.createElement(Q.a,{onChange:function(t){return function(t){var n=e.roles.map((function(n){return n===e.name?t:n}));e.setRoles(n)}(t.target.value)},label:"Role Name",type:"text",margin:"dense",value:e.name}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(M.a,null,"Functions"),r.a.createElement("div",{className:t.root},C.map((function(e){return r.a.createElement(X.a,{expanded:f===e.name,onChange:(n=e.name,function(e,t){y(!!t&&n)})},r.a.createElement(K.a,{expandIcon:r.a.createElement(ae.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement(m.a,{className:t.heading},e.name)),r.a.createElement($.a,null,r.a.createElement(m.a,null,e.desc)));var n})))),r.a.createElement(H.a,null)))},oe=Object(s.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"100%"}},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},extendedIcon:{marginRight:e.spacing(1)},xScrollable:{width:"auto",whiteSpace:"noWrap",overflowX:"scroll",paddingTop:e.spacing(5),paddingBottom:e.spacing(5),textAlign:"center"},container:{minHeight:"55vh"},deployContainer:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",height:"55vh",width:"100%"},codebox:{flex:1,height:"100%",backgroundColor:"#FCFCFC",overflowY:"scroll"},codeboxHeading:{backgroundColor:"#E7E7E7",padding:e.spacing(2),display:"flex",justifyContent:"space-between",alignItems:"center"},content:{paddingLeft:e.spacing(5)},detailContainer:{padding:e.spacing(5),backgroundColor:e.palette.primary.main,color:"white"}}}));function ce(){var e=oe();return r.a.createElement(w.a,{maxWidth:"sm"},r.a.createElement(J.a.div,{className:e.container,initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,type:"tween"}},r.a.createElement(m.a,{variant:"h4",component:"h2"},"Your Details"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("form",{className:e.root,noValidate:!0,autoComplete:"off"},r.a.createElement(Q.a,{id:"outlined-basic1",label:"Your Name",variant:"outlined",required:!0,autoFocus:!0}),r.a.createElement(Q.a,{id:"outlined-basic2",label:"Organisation Name",variant:"outlined",required:!0}),r.a.createElement(Q.a,{id:"outlined-basic3",label:"Your Address",variant:"outlined",required:!0,multiline:!0}))))}function se(){var e=oe(),t=r.a.useState(""),n=Object(E.a)(t,2),i=n[0],l=n[1],o=Object(a.useState)([]),c=Object(E.a)(o,2),s=c[0],u=c[1],d=r.a.useState(!1),p=Object(E.a)(d,2),f=p[0],y=p[1],h=Object(a.useState)(""),b=Object(E.a)(h,2),v=b[0],_=b[1],I=Object(a.useState)(""),S=Object(E.a)(I,2),x=S[0],A=S[1],N=function(){y(!1)};return r.a.createElement(w.a,{maxWidth:"sm"},r.a.createElement(J.a.div,{className:e.container,initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,type:"tween"}},r.a.createElement(m.a,{variant:"h4",component:"h2"},"Product Details"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("form",{className:e.root,noValidate:!0,autoComplete:"off"},r.a.createElement(Q.a,{id:"outlined-basic1",label:"Product Name",variant:"outlined",required:!0,autoFocus:!0}),r.a.createElement(k.a,{variant:"outlined",className:e.formControl,required:!0},r.a.createElement(q.a,{id:"demo-simple-select-filled-label"},"Category"),r.a.createElement(W.a,{value:i,onChange:function(e){l(e.target.value)}},r.a.createElement(T.a,{value:""},r.a.createElement("em",null,"None")),r.a.createElement(T.a,{value:10},"Industrial"),r.a.createElement(T.a,{value:20},"Medical"),r.a.createElement(T.a,{value:30},"Other"))),s.map((function(e,t){return r.a.createElement(D.a,null,r.a.createElement(O.a,null,r.a.createElement(V.a,{color:"error",cursor:"pointer",onClick:function(){return function(e){var t=s.filter((function(t){return t.name!==e.name}));u(Object(P.a)(t))}(e)}})),r.a.createElement(C.a,{primary:e.name,secondary:e.type}))}))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(L.a,{variant:"extended",color:"primary",onClick:function(){y(!0)}},r.a.createElement(Y.a,{className:e.extendedIcon}),"Add Property \xa0"),r.a.createElement(B.a,{open:f,onClose:N,"aria-labelledby":"form-dialog-title"},r.a.createElement(U.a,{id:"form-dialog-title"},"Add Property"),r.a.createElement(F.a,null,r.a.createElement(M.a,null,"Manufactuers will have to make sure to add theses customized property values while packing products."),r.a.createElement("br",null),r.a.createElement(Q.a,{value:v,onChange:function(e){return _(e.target.value)},label:"Property Name",type:"text",margin:"dense"}),r.a.createElement("br",null),r.a.createElement(k.a,null,r.a.createElement(q.a,{id:"demo-simple-select-label"},"Type"),r.a.createElement(W.a,{value:x,labelId:"demo-simple-select-label",onChange:function(e){A(e.target.value)},style:{minWidth:120}},r.a.createElement(T.a,{"aria-label":"None",value:""}),r.a.createElement(T.a,{value:"String"},"String"),r.a.createElement(T.a,{value:"Integer"},"Integer"),r.a.createElement(T.a,{value:"Boolean"},"Boolean"),r.a.createElement(T.a,{value:"Address(Hex)"},"Address(Hex)")))),r.a.createElement(H.a,null,r.a.createElement(g.a,{onClick:N,color:"primary"},"Cancel"),r.a.createElement(g.a,{onClick:function(){u([].concat(Object(P.a)(s),[{name:v,type:x}])),_(""),A(""),y(!1)},color:"primary"},"Add"))))))}function ue(){var e=oe(),t=Object(a.useState)([]),n=Object(E.a)(t,2),i=n[0],l=n[1],o=r.a.useState(!1),c=Object(E.a)(o,2),s=c[0],u=c[1],d=Object(a.useState)(""),m=Object(E.a)(d,2),p=m[0],f=m[1],y=r.a.useState({trackwithlot:!1,trackwithproduct:!0}),h=Object(E.a)(y,2),b=h[0],v=h[1],_=function(){u(!0)},I=function(){u(!1)},S=function(e){var t=i.filter((function(t){return t!==e}));l(t)},w=function(e){v(Object(A.a)(Object(A.a)({},b),{},Object(x.a)({},e.target.name,e.target.checked)))};return r.a.createElement("div",{style:{padding:20}},r.a.createElement(J.a.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,type:"tween"}},r.a.createElement("br",null),r.a.createElement("div",null,i.length?r.a.createElement(le,{blank:!0,handleClickOpen:_}):r.a.createElement(r.a.Fragment,null)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:e.xScrollable},i.length?i.map((function(e,t){return i.length-1===t?r.a.createElement(le,{key:t,name:e,removeRole:S,roles:i,setRoles:l,lastElement:!0}):r.a.createElement(le,{key:t,name:e,removeRole:S,setRoles:l,roles:i})})):r.a.createElement(le,{blank:!0,handleClickOpen:_}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(N.a,{control:r.a.createElement(R.a,{checked:b.trackwithlot,onChange:w,name:"trackwithlot",color:"primary"}),label:"Track With Lot ID "}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",r.a.createElement(N.a,{control:r.a.createElement(R.a,{checked:b.trackwithproduct,onChange:w,name:"trackwithproduct",color:"primary"}),label:"Track With Product ID "}))),r.a.createElement(B.a,{open:s,onClose:I,"aria-labelledby":"form-dialog-title"},r.a.createElement(U.a,{id:"form-dialog-title"},"Add Role"),r.a.createElement(F.a,null,r.a.createElement(M.a,null,"Manufactuers will have to make sure to add theses customized role values while packing products."),r.a.createElement(Q.a,{value:p,onChange:function(e){return f(e.target.value)},label:"Role Name",type:"text",margin:"dense"})),r.a.createElement(H.a,null,r.a.createElement(g.a,{onClick:I,color:"primary"},"Cancel"),r.a.createElement(g.a,{onClick:function(){l([].concat(Object(P.a)(i),[p])),u(!1),f("")},color:"primary"},"Add")))))}function de(){var e=oe();return r.a.createElement(w.a,{maxWidth:"lg"},r.a.createElement(J.a.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,type:"tween"},className:e.deployContainer},r.a.createElement("div",{className:e.codebox},r.a.createElement("div",{className:e.codeboxHeading},r.a.createElement(m.a,null,"SupplyChain.sol"),r.a.createElement(g.a,{className:e.deployAction,color:"primary",variant:"contained"},"DEPLOY")),r.a.createElement("div",{className:e.content},r.a.createElement("pre",null,"pragma solidity ^0.5.17;\npragma experimental ABIEncoderV2;\n\ncontract SupplyChain{\n    \n    address contractOwner;\n    mapping(string => lot) lots;            //mapping of lotId with struct of lot\n    mapping(string => product) products;    //mapping of productId with struct of product\n    mapping(address => user) users;         //mapping of userAddress with struct of user\n    mapping(address => bool) isUser;        // checks if he is part of supplychain\n    mapping(string => deal) deals;          //mapping of txnHash with struct of deal\n\n    enum State{\n        Assembling,\n        Made,\n        Packed,\n        ForSale,\n        Sold,\n        Shipped,\n        Received\n    }\n    \n    State constant defaultState = State.Assembling;\n    string brandName;\n    \n    struct user{\n        uint role;\n        address userId;\n        address parentId;                   //stores the address of parent i.e. distributer will have manufacturer as his parent\n        mapping(address=>bool) childIds;    // mapping of current user to its children addresses\n        uint currentQuantity;\n        string name;\n        string officeAddress;\n    }\n    \n    /*struct factory{\n        string factoryId;\n        string  originFactoryName;          // Manufacturer Name\n        string  originFactoryInformation;   // Manufacturer Information\n        string  originFactoryAddress;       // Factory Address\n    }*/\n    \n    struct deal{ \n        string txnHash;\n        uint capacity;\n        address payable buyerAddress;\n        uint buyingPrice;\n        address sellerAddress;\n        uint sellingPrice;\n    }\n\n    struct lot{ \n        string lotId;\n        // string factoryId;\n        address currentOwner;\n        string[] productIds;\n        State productState;\n        mapping(uint => address) trackUser;         //Roles mapped with userId [0->Owner, 1-> Manufacturer, 2-> Distributer, 3-> Retailer]\n        mapping(address => uint) buyingPrices;      //above userId mapped to buyingPrices\n        mapping(address => uint) sellingPrices;     //above userId mapped to sellingPrices\n        mapping(uint => string) trackTxn;           //Roles mapped with userId [0->Owner, 1-> Manufacturer, 2-> Distributer, 3-> Retailer]\n    }\n    \n    \n    struct product{\n        string productId;       //Barcode\n        string lotId;\n        uint finalBuyingPrice;\n        uint finalSellingPrice;\n    }\n    \n    event Made(string lotId);\n    event Packed();\n    event ForSale();\n    event Sold();\n    event Shipped();\n    event Received();\n    event TxAdded();\n    \n    event OwnerMadeManufacturer();\n    event UserAdded(address indexed account);\n    // event ManufacturerAdded(address indexed account);\n    // event ManufacturerRemoved(address indexed account);\n    // event DistributorAdded(address indexed account);\n    event DistributorRemoved(address indexed account);\n    event RetailerAdded(address indexed account);\n    event RetailerRemoved(address indexed account);\n    \n    // event FactoryAdded(string factoryId);\n    event LotMade(string lotId);\n    \n    event PaymentSuccessful();\n    event DealFailed(address buyerAddress);\n    \n    constructor(string memory _name, string memory _officeAddress) public {\n        require(bytes(_name).length!=0 && bytes(_officeAddress).length!=0);\n        contractOwner = msg.sender;\n        user memory owner = user({\n            role: 0,\n            userId : msg.sender,\n            parentId : address(0),\n            currentQuantity : 0,\n            name: _name,\n            officeAddress: _officeAddress\n        });\n        \n        setUser(msg.sender);\n        users[msg.sender] = owner;\n    }\n    \n    modifier onlyContractOwner{\n        \n        require(msg.sender == contractOwner);\n        _;\n    }\n    \n    modifier onlyManufacturer{\n        \n        require(users[msg.sender].role == 1);\n        _;\n    }\n    \n    modifier onlyDistributor{\n       \n       require(users[msg.sender].role == 2);\n       _;\n    }\n\n    modifier onlyRetailer{\n       \n       require(users[msg.sender].role == 3);\n       _;\n    }\n    \n    // Define a modifier that checks if the state of a lot is Made\n    modifier made(string memory _lotId) {\n        \n        require(lots[_lotId].productState == State.Made);\n        _;\n    }\n  \n    // Define a modifier that checks if the state of multiple lots is Packed\n    modifier packed(string[] memory _lotId) {\n        \n        for(uint i=0; i<_lotId.length;i++)\n            require(lots[_lotId[i]].productState == State.Packed);\n        _;\n    }\n\n    // Define a modifier that checks if the state of multiple lots is ForSale\n    modifier forSale(string[] memory _lotId) {\n\n        for(uint i=0; i<_lotId.length;i++)\n            require(lots[_lotId[i]].productState == State.ForSale);\n        _;\n    }\n\n    // Define a modifier that checks if the state of multiple lots is Sold\n    modifier sold(string[] memory _lotId) {\n\n        for(uint i=0; i<_lotId.length;i++)\n            require(lots[_lotId[i]].productState == State.Sold);\n        _;\n    }\n  \n    // Define a modifier that checks if the state of multiple lots is Shipped\n    modifier shipped(string[] memory _lotId) {\n\n        for(uint i=0; i<_lotId.length;i++)\n            require(lots[_lotId[i]].productState == State.Shipped);\n        _;\n    }\n\n    // Define a modifier that checks if the state of multiple lots is Received\n    modifier received(string[] memory _lotId) {\n\n        for(uint i=0; i<_lotId.length;i++)\n            require(lots[_lotId[i]].productState == State.Received);\n        _;\n    }\n\n    // Define a modifier that checks if the deal was valid\n    modifier validDeal(string memory txnHash) {\n\n        require(deals[txnHash].sellingPrice==deals[txnHash].buyingPrice);\n        _;\n    }\n    \n    function checkIsUser(address account) internal view returns(bool){\n        \n        return isUser[account];\n    }\n    \n    function getUserRole(address account) public view returns(uint){\n\n        if(account==contractOwner)\n            return 0;\n        if(checkIsUser(account))\n            return users[account].role;\n        else\n            return 4;\n    }\n\n    function getUserDetails(address account) public view returns(string memory, string memory){\n            \n        return (\n                users[account].name,\n                users[account].officeAddress\n            );\n    }\n\n    function setUser(address account) internal{\n        \n        isUser[account]=true;\n    }\n\n  /*  function removeUser(address account) internal{\n        users[users[account].parentId].childIds[account]=false;\n        users[account].chi\n        isUser[account]=false;\n    }\n    */\n    \n    function makeOwnerAsManufacturer() public onlyContractOwner{\n        \n        if(users[msg.sender].role==0){\n            users[msg.sender].role=1;\n            emit OwnerMadeManufacturer();\n        }\n    }\n    \n    function addChildUser(string memory _name, string memory _officeAddress, address _userAccount) public {\n        \n        require(!checkIsUser(_userAccount));\n        user memory child = user({\n            role: getUserRole(msg.sender)+1,\n            userId : _userAccount,\n            parentId : msg.sender,\n            currentQuantity : 0,\n            name: _name,\n            officeAddress: _officeAddress\n        });\n        \n        users[_userAccount] = child;\n        users[msg.sender].childIds[_userAccount] = true;\n        setUser(_userAccount);\n        emit UserAdded(_userAccount);\n    }\n    \n    function addOtherUser(string memory _name, string memory _officeAddress, address _parentAccount, address _userAccount, uint _userRole) public {\n        \n        require(!checkIsUser(_userAccount));\n        require(getUserRole(msg.sender)<_userRole);\n        if(_parentAccount!=contractOwner)\n            require(getUserRole(_parentAccount)==_userRole-1);\n        else{\n            require(_userRole==2);\n            makeOwnerAsManufacturer();\n        }\n        user memory child = user({\n            role: _userRole,\n            userId : _userAccount,\n            parentId : _parentAccount,\n            currentQuantity : 0,\n            name: _name,\n            officeAddress: _officeAddress\n        });\n        \n        users[_userAccount] = child;\n        users[_parentAccount].childIds[_userAccount] = true;\n        setUser(_userAccount);\n        emit UserAdded(_userAccount);\n    }\n    \n   \n    \n    function makeLot(string memory _lotId, string[] memory _productIds) public onlyManufacturer{\n        \n        for(uint i = 0;i<_productIds.length;i++){\n            product memory productDetails = product({\n                productId : _productIds[i],\n                lotId : _lotId,\n                finalBuyingPrice : 0,\n                finalSellingPrice : 0\n            });\n            products[_productIds[i]] = productDetails;\n        }\n        \n        lot memory lotDetails = lot({\n            lotId : _lotId,\n            // factoryId : _factoryId,\n            currentOwner : msg.sender,\n            productIds : _productIds,\n            productState : State.Made\n        });\n        \n        lots[_lotId] = lotDetails;\n        lots[_lotId].trackUser[0] = contractOwner;\n        lots[_lotId].trackUser[1] = msg.sender;\n        emit LotMade(_lotId);\n    }\n    \n    function packedLot(string memory _lotId) public onlyManufacturer made(_lotId){\n        \n        lots[_lotId].productState = State.Packed;\n        emit Packed();\n    }\n    \n    function forSaleLotByManufacturer(string[] memory _lotId, uint _price) public onlyManufacturer packed(_lotId){\n        \n        for(uint i = 0;i<_lotId.length;i++){\n            lots[_lotId[i]].sellingPrices[msg.sender] = _price;\n            lots[_lotId[i]].productState = State.ForSale;\n        }\n        users[msg.sender].currentQuantity+=_lotId.length;\n        emit ForSale();\n    }\n    \n    function payFromDistributorToManufacturer(uint _quantity, uint _totalBuyingPrice, string memory _txnHash) public onlyDistributor{\n        \n        require(_quantity<=users[users[msg.sender].parentId].currentQuantity);\n        users[msg.sender].currentQuantity+=_quantity;\n        users[users[msg.sender].parentId].currentQuantity-=_quantity;\n        deal memory dealDetails = deal({\n            txnHash: _txnHash,\n            capacity: _quantity,\n            buyerAddress: msg.sender,\n            buyingPrice:  _totalBuyingPrice,\n            sellerAddress: users[msg.sender].parentId,\n            sellingPrice: 0\n        });\n        deals[_txnHash] = dealDetails;\n        emit PaymentSuccessful();\n    }\n\n    function sellLotToDistributor(string memory _txnHash, uint _totalSellingPrice, string[] memory _lotId) public onlyManufacturer forSale(_lotId){\n        \n        deal storage activeDeal = deals[_txnHash];\n        if(activeDeal.buyingPrice!=_totalSellingPrice){\n            activeDeal.buyerAddress.transfer(activeDeal.buyingPrice);\n            emit DealFailed(activeDeal.buyerAddress);\n        }else{\n            activeDeal.sellingPrice = _totalSellingPrice;\n            deals[_txnHash] = activeDeal;\n            for(uint i = 0;i<_lotId.length;i++){\n                lots[_lotId[i]].buyingPrices[activeDeal.buyerAddress] = (activeDeal.buyingPrice/activeDeal.capacity);\n                lots[_lotId[i]].sellingPrices[msg.sender] = (activeDeal.sellingPrice/activeDeal.capacity);\n                lots[_lotId[i]].buyingPrices[msg.sender] = 0;\n                lots[_lotId[i]].currentOwner = activeDeal.buyerAddress;\n                lots[_lotId[i]].productState = State.Sold;\n            }\n            emit Sold();\n        }\n    }\n    \n    function shipLotFromManufacturerToDistributor(string[] memory _lotId, string memory _txnHash) public onlyManufacturer validDeal(_txnHash) sold(_lotId){\n         \n        require(msg.sender!=deals[_txnHash].buyerAddress);\n        for(uint i = 0;i<_lotId.length;i++){\n            lots[_lotId[i]].trackUser[2] = deals[_txnHash].buyerAddress;\n            lots[_lotId[i]].trackTxn[2] = _txnHash;\n            lots[_lotId[i]].productState = State.Shipped;\n        }\n        emit Shipped();\n    }\n\n    function receivedByDistributor(string[] memory _lotId) public onlyDistributor shipped(_lotId){\n\n        for(uint i = 0;i<_lotId.length;i++){\n            lots[_lotId[i]].productState = State.Received;\n        }\n        emit Received();\n    }\n\n    function forSaleLotByDistributor(string[] memory _lotId, uint _price) public onlyDistributor received(_lotId){\n                \n        require(users[msg.sender].currentQuantity>=_lotId.length);\n        for(uint i = 0;i<_lotId.length;i++){\n            lots[_lotId[i]].sellingPrices[msg.sender] = _price;\n            lots[_lotId[i]].productState = State.ForSale;\n        }\n        emit ForSale();\n    }\n\n    function payFromRetailerToDistributor(uint _quantity, uint _totalBuyingPrice, string memory _txnHash) public onlyRetailer{\n        \n        require(_quantity<=users[users[msg.sender].parentId].currentQuantity);\n        users[msg.sender].currentQuantity+=_quantity;\n        users[users[msg.sender].parentId].currentQuantity-=_quantity;\n        deal memory dealDetails = deal({\n            txnHash: _txnHash,\n            capacity: _quantity,\n            buyerAddress: msg.sender,\n            buyingPrice:  _totalBuyingPrice,\n            sellerAddress: users[msg.sender].parentId,\n            sellingPrice: 0\n        });\n        deals[_txnHash] = dealDetails;\n        emit PaymentSuccessful();\n    }\n\n    function sellLotToRetailer(string memory _txnHash, uint _totalSellingPrice, string[] memory _lotId) public onlyDistributor forSale(_lotId){\n        \n        deal storage activeDeal = deals[_txnHash];\n        if(activeDeal.buyingPrice!=_totalSellingPrice){\n            activeDeal.buyerAddress.transfer(activeDeal.buyingPrice);\n            emit DealFailed(activeDeal.buyerAddress);\n        }else{\n            activeDeal.sellingPrice = _totalSellingPrice;\n            deals[_txnHash] = activeDeal;\n            for(uint i = 0;i<_lotId.length;i++){\n                lots[_lotId[i]].buyingPrices[activeDeal.buyerAddress] = (activeDeal.buyingPrice/activeDeal.capacity);\n                lots[_lotId[i]].sellingPrices[msg.sender] = (activeDeal.sellingPrice/activeDeal.capacity);\n                lots[_lotId[i]].currentOwner = activeDeal.buyerAddress;\n                lots[_lotId[i]].productState = State.Sold;\n            }\n            emit Sold();\n        }\n    }\n    \n    function shipLotFromDistributorToRetailer(string[] memory _lotId, string memory _txnHash) public onlyDistributor validDeal(_txnHash) sold(_lotId){\n        \n        require(msg.sender!=deals[_txnHash].buyerAddress);\n        for(uint i = 0;i<_lotId.length;i++){\n            lots[_lotId[i]].trackUser[3] = deals[_txnHash].buyerAddress;\n            lots[_lotId[i]].trackTxn[3] = _txnHash;\n            lots[_lotId[i]].productState = State.Shipped;\n        }\n        emit Shipped();\n    }\n\n    function receivedByRetailer(string[] memory _lotId) public onlyRetailer shipped(_lotId){\n\n        for(uint i = 0;i<_lotId.length;i++){\n            lots[_lotId[i]].productState = State.Received;\n        }\n        emit Received();\n    }\n\n    function getProductDetails(string memory _productId) public view returns(product memory){\n\n        return products[_productId];\n    }\n\n    function setProductFinalSellingPrice(string memory _productId, uint sellingPrice) public {\n        \n        require(getUserRole(msg.sender)==3);\n        products[_productId].finalSellingPrice = sellingPrice;\n    }\n    \n    function setProductFinalBuyingPrice(string memory _productId, uint buyingPrice) public {\n        \n        require(getUserRole(msg.sender)==4);\n        products[_productId].finalBuyingPrice = buyingPrice;\n    }\n\n    function trackProductByProductId(string memory _productId) public view returns(uint, address[] memory, uint){\n        \n        string storage _lotId = products[_productId].lotId;\n        return trackProductByLotId(_lotId);\n    }\n\n    function trackProductByLotId(string memory _lotId) public view returns(uint, address[] memory, uint){\n        \n        address[] memory ret = new address[](4);\n        uint n = users[lots[_lotId].currentOwner].role;\n        for (uint i=0; i<=n; i++) {\n            ret[i]=lots[_lotId].trackUser[i];\n        }\n        return (\n            n,\n            ret,\n            uint(lots[_lotId].productState)\n        );\n    }\n}")))))}function me(){var e=oe();return r.a.createElement(J.a.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,type:"tween"}},r.a.createElement(w.a,{maxWidth:"md"},r.a.createElement("div",{className:e.container},r.a.createElement("br",null),r.a.createElement(j.a,{square:!0,className:e.detailContainer,elevation:5},r.a.createElement(m.a,{variant:"h3"},"Contract Address"),r.a.createElement(m.a,{variant:"h6"},"0xfab9f7a5615a4fa7da0b8e669b076dc62b545e86"),r.a.createElement("br",null),r.a.createElement(m.a,{variant:"h3"},"Transaction Hash"),r.a.createElement(m.a,{variant:"h6"},"0x8b38a6d785f3ba2784a322b33e6fcc9932458429aeaff88cbe03ac4625ffedfc"),r.a.createElement("br",null),r.a.createElement(m.a,{variant:"h3"},"Owner"),r.a.createElement(m.a,{variant:"h6"},"0x2114107ddd2c0bb7a174dda0245d0052618c1c28")))))}var ge=n(71),pe=n.n(ge),fe=n(77),ye=n.n(fe),he=Object(s.a)((function(e){return{root:{width:"100%"},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},fullPage:{width:"100%",marginTop:e.spacing(5),marginBottom:e.spacing(5)},floatRight:{float:"right",marginTop:e.spacing(2),marginBottom:e.spacing(2),marginRight:e.spacing(30)}}}));function be(){var e=he(),t=r.a.useState(0),n=Object(E.a)(t,2),a=n[0],i=n[1],l=["Your Details","Product Details","Customize Supply Chain","Deploy Smart Contract"],o=function(){i((function(e){return e-1}))};return r.a.createElement("div",{className:e.root},r.a.createElement(S.a,{activeStep:a,alternativeLabel:!0},l.map((function(e){return r.a.createElement(_.a,{key:e},r.a.createElement(I.a,null,e))}))),r.a.createElement("div",null,a===l.length?r.a.createElement("div",null,r.a.createElement(me,null),r.a.createElement("div",{className:e.floatRight},r.a.createElement(g.a,{disabled:0===a,onClick:o,startIcon:r.a.createElement(ye.a,{color:"primary"}),className:e.backButton},"Back"))):r.a.createElement("div",null,r.a.createElement("div",{className:e.fullPage},function(e){switch(e){case 0:return r.a.createElement(ce,null);case 1:return r.a.createElement(se,null);case 2:return r.a.createElement(ue,null);case 3:return r.a.createElement(de,null);default:return"Please go to Your Details"}}(a)),r.a.createElement("div",{className:e.floatRight},r.a.createElement(g.a,{disabled:0===a,onClick:o,startIcon:r.a.createElement(ye.a,{color:"primary"}),className:e.backButton},"Back"),r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:function(){i((function(e){return e+1}))},endIcon:r.a.createElement(pe.a,null)},a===l.length-1?"Finish":"Next")))))}var ve=function(){return r.a.createElement("div",null,r.a.createElement(be,null))},Ee=n(47);var _e=function(){return r.a.createElement("div",{className:"landing-container"},r.a.createElement(w.a,{maxWidth:"lg"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(m.a,{className:"heading",variant:"h3"},"Supply"),r.a.createElement(m.a,{className:"heading",variant:"h1"},"Chain Hub"),r.a.createElement(m.a,{variant:"h6",className:"sub-heading"},"Create customized Supply Chain for your Products without code"),r.a.createElement("br",null),r.a.createElement(Ee.b,{to:"/build",style:{textDecoration:"none",color:"#2196f3"}},r.a.createElement(g.a,{variant:"contained",endIcon:r.a.createElement(pe.a,{color:"primary"}),style:{backgroundColor:"white",color:"#2196f3",borderRadius:20,padding:"0.5rem 1.5rem"}},"Get Started")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)))},Ie=function(){return r.a.createElement(v.d,null,r.a.createElement(v.b,{path:"/home",exact:!0},r.a.createElement(_e,null)),r.a.createElement(v.b,{path:"/build",exact:!0},r.a.createElement(ve,null)),r.a.createElement(v.a,{to:"/home"}))};var Se=function(){var e=Object(o.a)({typography:{fontFamily:'"Poppins", sans-serif',fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500},palette:{primary:{main:"#2196f3"}}});return r.a.createElement(c.a,{theme:e},r.a.createElement("div",{className:"App"},r.a.createElement(b,null),r.a.createElement(Ie,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ee.a,{basename:"/SupplyChainHub-Client"},r.a.createElement(Se,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[101,1,2]]]);
//# sourceMappingURL=main.3be6288b.chunk.js.map